<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>React and D3: A Tale of Two DOMs</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<link rel="stylesheet" href="css/styles.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<div class="flex-container">
					  <div class="flex-item"><img src='images/james-happy.png'/></div>
					  <div>
  						<h2 class="flex-item" width='55%' style='white-space: nowrap'>React and D3</h2>
  						<hr>
						<h4><i>A Tale of Two DOMs</i></h4>
					  </div>
					  <div class="flex-item"><p class='text'><img src='images/bob-happy.png'/></p></div>
					</div>
					<aside class="notes">
						<ul>
							<li>Hi, how is everyone?</li>
							<li>I wanted to get an idea of who has worked with React before?</li>
							<li>How about D3?</li>
							<li>and how many of you have used them both together?</li>
							<li>alright, cool! let's get started then!</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item"><img src='images/me.png'/></div>
					  <div class="flex-item">
					  	<h4>I am...</h4>
						<p>Danielle Closs</p>
						<p><a href="https://twitter.com/daniellecloss" target="_blank">@daniellecloss</a></p>
						<p><a href="mailto:danielle.c.closs@gmail.com">danielle.c.closs@gmail.com</a></p>
					</div>
					<aside class="notes">
						<ul>
							<li>My name is Danielle</li>
							<li>I work at Arbor Networks on their network visibility product</li>
							<li>I've been working as a UI Developer in the Ann Arbor area for about 8 years</li>
						<ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<h4>Follow along!</h4>
							<p>code: <a href="http://bit.ly/2mtSyAF" target="_blank">http://bit.ly/2mtSyAF</a></p>
							<p>slides: <a href="http://bit.ly/2mcnNPu" target="_blank">http://bit.ly/2mcnNPu</a></p>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>Here are links to both the slides and the code for this presentation</li>
							<li>follow along, or look at these later, if you like</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item"><img src='images/james-waving.png'/></div>
					  <div class="flex-item"><p class='text'>This is James S. Developer</p></div>
					</div>
					<aside class="notes">
						<ul>
							<li>Tonight, I want to tell you a story, about a developer who is quite familiar with React, and has used D3, but just a little</li>
							<li>This is a story of how he learned to use React and D3 together</li>
							<li>This is James, our javascript developer, and the protagonist of our story...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item"><p class='text'>...and this is Bob, his client</span></p></div>
					  <div class="flex-item"><img src='images/bob-happy.png'/></div>
					</div>
					<aside class="notes">
						<ul>
							<li>...and this is James' client, Bob, a successful business owner.</li>
							<li>Bob, like many clients, thinks he "needs" a flashy site for his business</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
					  <p>James is making Bob his "flashy" site, using React...</p>
					  <p>(James <3 React!)</p>
					  </div>
					  <div class="flex-item">
					  </div>
				  </div>
					<aside class="notes">
						<ul>
							<li>James is using React to make Bob's website</li>
							<li>James loves react :)</li>
							<li>The site's purpose is to show off how great Bob's company sales are!</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
					  	<p>...and Bob wants James to add<br>a bar chart to show his sales</p><p>...and he wants it NOW!</p>
					  </div>
					  <div class="flex-item">
					  	<img src='images/bob-mad.png'/>
					  </div>
				  </div>
					<aside class="notes">
						<ul>
							<li>To make the site more flashy and awesome, Bob wants a bar chart showing his sales</li>
							<li>and he wants it NOW!  (as many clients do!)</li>
							<li>I bet many of you have been in similar situations...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
					  	<img src='images/james-thumbs-up.png'/>
				  	  </div>
				      <div class="flex-item">
					  	<p>James tells Bob he will get right on it!<br><br>He can use D3.js<br>to add the data visualization!
					  	<br><br>But, where to begin?</p>
					  </div>
				  </div>
					<aside class="notes">
						<ul>
							<li>James, being the good developer he is, tells Bob he will start on it right away!</li>
							<li>He can use D3 the create the bar chart!</li>
							<li>But this is new territory for James;</li>
							<li>He has not used D3 inside of React before</li>
							<li>He is not sure where to start...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
						<img src='images/james-sad.png'/>
					  </div>
					  <div class="flex-item">
					  	<p>James is now a bit stressed...<br><br>How should he go about adding<br>a D3 data visualization<br>to his React app?</p>
					  </div>
				  </div>
					<aside class="notes">
						<ul>
							<li>James is now stressed and frustrated.</li>
							<li>But, again, being the good developer that he is, he:</li>
							<ul>
								<li>analyzes the problem</li>
								<li>and breaks it down into "bite-sized" pieces</li>
							</ul>
							<li>First he starts with the questions he has...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container key">
						<div class="flex-item">
						<h4>James has these questions:</h4>
							<ol>
								<li>How would you integrate D3 into a React app?</li>
								<li>Don't they both manipulate the DOM?<br>How can I make sure they don't step on each other?</li>
								<li>Where do I draw the line between what React handles<br>and what D3 handles?</li>
								<li>What are the advantages of using these libraries together?</li>
							</ol>
						</div>
					</div>
					<aside class="notes">
						<p>(read questions)</p>
						<p>Having asked himself these questions, James decides to start at the beginning, with Step 1!</p>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<h4>[STEP 1]: Review your current app</h4>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>Step 1 - review your current app</li>
							<li>I always say: start from where you are!</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<img src="images/partial-app.png" class="code-image"/>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>This is what James' current app structure looks like</li>
							<li>The code has a starting place, the App component...</li>
							<li>...and an InputForm component, where the user can enter a year for the sales data he wants to see</li>
							<li>Having the user-selected year available should help him when he adds the sales data and the D3 code for the bar chart...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container code">
						<div class="flex-item">
							<h4>Let's look at the code!</h4>
							<p>Step 1 code: <a href="http://bit.ly/2m059I3" target="_blank">http://bit.ly/2m059I3</a></p>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>Let's look at the code for his base react components and app... (switch to code editor and app)</li>
							<li>App component</li>
							<li>InputForm component</li>
							<li>and don't forget to ask questions!</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<h4>[STEP 2]: Get/Find a Standalone D3 Data Visualization</h4>
							<p>Then James looks around online<br>(of course!)<br>to see if he can find a D3 example</p>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>For step 2 - James, like any good developer, hits the interwebs</li>
							<li>and looks around to find an example of a D3 bar chart</li>
							<li>He can use this code as a source of the D3 code that he wants to pull into his React app</li>
							<li>At this point, you could also make your own standalone D3 visualization, and use that code</li>
							<li>I'm sure that you know you are not limited to what is already available on the internet :)</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container code">
						<div class="flex-item">
							<h4>Let's look at the code!</h4>
							<p>Step 2 code: <a href="http://bit.ly/2nc1ebw" target="_blank">http://bit.ly/2nc1ebw</a></p>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li><a href="file:///Users/daniellecloss/projects/react-d3-dom-code/standalone-d3/index.html">file:///Users/daniellecloss/projects/react-d3-dom-code/standalone-d3/index.html</a></li>
							<li>Let's look at the example that James found online (switch to code editor and app)</li>
							<li>and don't forget to ask questions!</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<h4>[STEP 3]: Divide the D3 code into components</h4>
							<p>James looks at the D3 code,<br>and he sees these components:</p>
							<ul>
								<li>An X axis</li>
								<li>A Y axis</li>
								<li>The bar chart</li>
							</ul>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>James looks at this D3 code</li>
							<li>and mentally separates it into components</li>
							<li>This is a "React-y" way of looking at code</li>
							<li>This planning will help James move the D3 code into React components</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<p>While James works to move these D3 components<br>into his React app, he thinks about:</p>
							<ul>
								<li>What should D3 handle, and what should React handle?</li>
								<li>What type of data flow should my app have?</li>
								<li>How should I break up the data visualization into components?</li>
								<li>How should I encapsulate these components?</li>
							</ul>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>(half way point)</li>
							<li>While working, James thinks about...</li>
							<li>(read questions)</li>
							<li>These concepts are not specific to React code</li>
							<li>These are all things you would need to think about when building any kind of coded component system</li>
							<li>These questions are probably questions you have asked yourself while building an application</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<img src="images/full-app.png" class="code-image"/>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>Here is a drawing of the new app structure, with the additional components for the data visualization</li>
							<li>The dashed line surrounds the original app components</li>
							<li>We now have a BarChart component, made of an 'included' rectangles subcomponent</li>
							<li>We also have a ChartAxis component</li>
							<li>And the App component handles the communication between the InputForm and BarChart components</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container code">
						<div class="flex-item">
							<h4>Let's look at the code!</h4>
							<p>Step 3 code: <a href="http://bit.ly/2mz77Cl" target="_blank">http://bit.ly/2mz77Cl</a></p>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>Let's take a look at the code that James came up with... (switch to code editor and app)</li>
							<li>and don't forget to ask questions!</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
						<img src='images/james-happy.png'/>
					  </div>
					  <div class="flex-item">
						<p>At this point, James now has a<br>working bar chart in his React app!<br>But, he's not done yet... </p>
					  </div>
					</div>
					<aside class="notes">
						<ul>
							<li>James is almost done!</li>
							<li>He has a working bar chart, with static sales data, added to his app, in new React components!</li>
							<li>but he is still missing a key piece...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<h4>[STEP 4]: Make it interactive!</h4>
							<p>Now that the visualization is broken up into components, this part is easy!</p>
							<ul>
								<li>Add a new external json file with monthly sales data</li>
								<li>Get the year from the user, for the sales data that the user wants to see</li>
								<li>React automatically updates the bars in the chart, given the entered year</li>
								<li>And D3 recalculates the axes' scales when the sales data is updated</li>
							</ul>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>Step 4 - making it interactive</li>
							<li>What does James need to do next?</li>
							<li>Let React and D3 do what each does best!</li>
							<li>React can hang onto the data and app state (in other words, what year the user has entered, and the corresponding sales data)</li>
							<li>When the React BarChart component responds to the new data that is passed in</li>
							<li>React can update the bar chart data and D3 can calculate the correct scale for the axes</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container code">
						<div class="flex-item">
							<h4>Let's look at the code!</h4>
							<p>Step 4 code: <a href="http://bit.ly/2mgU9aq" target="_blank">http://bit.ly/2mgU9aq</a></p>
							<p>app: <a href="http://localhost:8081/" target="_blank">http://localhost:8081/</a></p>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>Let's take a look at the code that James has come up with, to finish up the app, making it fully functional (switch to code editor and app)</li>
							<li>and don't forget to ask questions!</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<h4>And done!</h4>
							<p>James now has an interactive D3 data visualization<br>in his React app, which:</p>
							<ul>
								<li>allows a user to look at sales data for different years...</li>
								<li>...and uses the same data visualization components</li>
							</ul>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>James now has an interactive app!</li>
							<li>He is rather proud of his accomplishment at this point</li>
							<li>and he feels that this is a good base for his code, so that he can extend his app in the future...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
						<img src='images/james-question.png'/>
					  </div>
					  <div class="flex-item">
						<p>James reflects on all his hard work,<br>thinking about the questions<br>he asked earlier</p>
					  </div>
					</div>
					<aside class="notes">
						<p>Let's take a look at what James has learned from this experience with using React with D3...</p>
					</aside>
				</section>
				<section>
					<div class="flex-container key">
						<div class="flex-item">
							<p><i>1. How would you integrate D3 into a React app?</i></p>
							<ul>
								<li>Start by first reviewing your current React app</li>
								<li>Then find an example standalone D3 data visualization</li>
								<li>Create React components from the D3 code</li>
								<li>Make the data visualization interactive,<br>using the best parts of React and D3 together</li>
							</ul>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>How would you integrate D3 into a React app?</li>
							<li>(read steps from slide)</li>
							<li>It's really as simple as this to get started...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container key">
						<div class="flex-item">
							<p><i>2. Don't they both manipulate the DOM?<br>How can I make sure they don't step on each other?</i></p>
							<p>Yes, they both manipulate the DOM.<br><br>When used together,<br>you should clearly separate who is doing what,<br>according to what each does best.</p>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>In terms of DOM manipulation, React and D3 could both select elements, and apply attribute or property updates to them, but obviously when used together, only one of them should be doing the job!</li>
							<li>The idea of 'clear separation' is really a practice synonymous with good software development...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container key">
						<div class="flex-item">
							<p><i>3. Where do I draw the line between what React handles and what D3 handles?</i></p>
							<p>With most DOM manipulations,<br>you can let React handle it,<br>like when storing data and passing it to components.<br><br>But when it comes to<br>highly complex data viz calculations, leave that to D3.</p>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>When drawing the line between what React handles and D3 handles, the general guidelines are to let React handle most things, except the heavy data vizualization calculations...</li>
							<li>This line may not always be clear, but the important thing to remember is, don't have both D3 and React trying to manipulate the same elements at the same time...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container key">
						<div class="flex-item">
							<p><i>4. What are the advantages of using both of these libraries together?</i></p>
							<p>As James is working, he finds out what these are:</p>
							<ul>
								<li>React is faster with DOM manipulation (using it's virtual DOM)</li>
								<li>React is good at handling page/app state</li>
								<li>D3 does a better job at the heavy calculations<br>that are sometimes required for data visualizations,<br>like calculating the scales for a bar chart</li>
							</ul>
						</div>
					</div>
					<aside class="notes">
						<ul>
						<li>These libraries can go well together, with some forethought;</li>
						<li>Both have their own advantages, like React's virtual DOM, and D3's data visualization methods for calculations</li>
						<li>Like peanut butter and jelly, they go great together!</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
						<svg width="100%" viewBox="0 0 640 225" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><circle fill-opacity=".504" fill="#65D9F9" cx="318" cy="115" r="98" /><circle fill-opacity=".503" fill="#F79E4E" cx="397" cy="115" r="98" /><path d="M357.5 204.428c34.451-15.19 58.5-49.644 58.5-89.714S391.951 40.19 357.5 25C323.049 40.19 299 74.644 299 114.714s24.049 74.523 58.5 89.714z" fill="#FFF" /><circle stroke="#979797" cx="318" cy="115" r="98" /><circle stroke="#979797" cx="397" cy="115" r="98" /><text font-family="Helvetica" font-size="15" letter-spacing=".083" fill="#000"><tspan x="342.877" y="108">DOM</tspan> <tspan x="317.472" y="126">Manipulation</tspan></text><text font-family="Helvetica" font-size="15" letter-spacing=".083" fill="#000"><tspan x="426" y="59">Math</tspan></text><text font-family="Helvetica" font-size="15" letter-spacing=".083" fill="#000"><tspan x="426" y="88">Scales</tspan></text><text font-family="Helvetica" font-size="15" letter-spacing=".083" fill="#000"><tspan x="426" y="117">Layouts</tspan></text><text font-family="Helvetica" font-size="15" letter-spacing=".083" fill="#000"><tspan x="426" y="146">Utilities</tspan></text><text font-family="Helvetica" font-size="15" letter-spacing=".083" fill="#000"><tspan x="426" y="175">Etc.</tspan></text><text font-family="Helvetica" font-size="10" letter-spacing=".056" fill="#000"><tspan x="239.745" y="143">Components</tspan></text><text font-family="Helvetica" font-size="15" letter-spacing=".083" fill="#000"><tspan x="249.32" y="108">Server </tspan> <tspan x="224.036" y="126">Rendering</tspan></text><text font-family="Helvetica" font-size="48" letter-spacing=".267" fill="#000"><tspan x="70.276" y="126">React</tspan></text><text font-family="Helvetica" font-size="48" letter-spacing=".267" fill="#000"><tspan x="517" y="126">d3</tspan></text></g></svg>
						<a href="http://www.macwright.org/2016/10/11/d3-and-react.html" style="font-size:.65em;" target="_blank">http://www.macwright.org/2016/10/11/d3-and-react.html</a>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>I found this graphic while researching this talk</li>
							<li>I thought it was a nice visual to describe that React and D3 overlap when it comes to DOM manipulation</li>
							<li>And, this graphic also gave a nice list of what React and D3 do well</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
						<img src='images/james-thumbs-up.png'/>
					  </div>
					  <div class="flex-item">
						<p>James shows Bob his app,<br>with the new <br>sales bar chart, and<br>Bob is excited!</p>
					  </div>
					  <div class="flex-item">
						<img src='images/bob-thumbs-up.png'/>
					  </div>
					</div>
					<aside class="notes">
						<ul>
							<li>James shows Bob the final version, and Bob loves it!</li>
							<li>Bob sees future possibilities! And, then he asks...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<p>Bob just has one question,<br><br>"Can we make another page with a pie chart??"</p>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>...if James can add another new chart in his site!!!</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
					  	<img src='images/james-vacation.png'/>
					  </div>
					  <div class="flex-item">
						<p>James politely excuses himself,<br>and decides that a vacation is long overdue!</p>
					  </div>
				  </div>
				  <aside class="notes">
				  	<ul>
				  		<li>Poor James!  But, I'm sure you can relate!</li>
				  		<li>The good news is, now that he knows how to integrate React and D3, making a pie chart will be a piece of cake, er, pie! :)</li>
			  		</ul>
				  </aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<h4>Thanks for listening!</h4>
							<p>code: <a href="http://bit.ly/2mtSyAF" target="_blank">http://bit.ly/2mtSyAF</a></p>
							<p>slides: <a href="http://bit.ly/2mcnNPu" target="_blank">http://bit.ly/2mcnNPu</a></p>
							<br>
							<p><a href="https://twitter.com/daniellecloss" target="_blank">@daniellecloss</a></p>
							<p><a href="mailto:danielle.c.closs@gmail.com">danielle.c.closs@gmail.com</a></p>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>You can check out the code on github, clone the repo, run it, dig through it, compare the standalone D3 code with the React component code.</li>
							<li>While I was working on the code for this presentation, this is what I was doing.</li>
							<li>I think looking at the code by comparing and contrasting these 2 implementations had an impact on how I saw these two libraries working together, even though I already use D3 and React together pretty regularly...</li>
							<li>And I did get some of this code from examples online, like any good developer :)</li>
							<li>I also wanted to mention that these examples are using React version 15 and D3 version 4</li>
							<li>I hope this has been useful for you, and thanks for listening!</li>
							<li>Questions??</li>
					</aside>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,
				center:false,
				width: "100%",
			    height: "100%",
			    margin: 0,
			    minScale: 1,
			    maxScale: 1,
				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
