<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>React and D3: A Tale of Two DOMs</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<link rel="stylesheet" href="css/styles.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<div class="flex-container">
					  <div class="flex-item"><img src='images/james-happy.png'/></div>
					  <div>
  						<h2 class="flex-item" width='55%' style='white-space: nowrap'>React and D3</h2>
  						<hr>
						<h4><i>A Tale of Two DOMs</i></h4>
					  </div>
					  <div class="flex-item"><p class='text'><img src='images/bob-happy.png'/></p></div>
					</div>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item"><img src='images/me.png'/></div>
					  <div class="flex-item">
					  	<h4>I am...</h4>
						<p>Danielle Closs</p>
						<p><a href="https://twitter.com/daniellecloss" target="_blank">@daniellecloss</a></p>
						<p><a href="mailto:danielle.c.closs@gmail.com">danielle.c.closs@gmail.com</a></p>
					</div>
					<aside class="notes">
						<ul>
							<li>My name is Danielle</li>
							<li>work at Arbor Networks on their network visibility product</li>
							<li>been working as a UI Developer in Ann Arbor area for 8 years</li>
						<ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<h4>Follow along!</h4>
							<p>code: <a href="http://bit.ly/2mtSyAF" target="_blank">http://bit.ly/2mtSyAF</a></p>
							<p>slides: <a href="http://bit.ly/2mcnNPu" target="_blank">http://bit.ly/2mcnNPu</a></p>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>links to both the slides and code for this presentation</li>
							<li>follow along</li>
							<li>look at it later</li>
							<li>tell you a story</li>
							<li>a story that may seem familiar</li>
							<li>about a javascript developer</li>
							<li>very much like many of you in the audience...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item"><img src='images/james-waving.png'/></div>
					  <div class="flex-item"><p class='text'>This is James S. Developer</p></div>
					</div>
					<aside class="notes">
						<p>This is James, and he is the protagonist of our story...</p>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item"><p class='text'>...and this is Bob, his client</span></p></div>
					  <div class="flex-item"><img src='images/bob-happy.png'/></div>
					</div>
					<aside class="notes">
						<p>...and this is James' client, Bob, a successful business owner, that "needs" a flashy site (of course!)</p>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
					  <p>James is making a React app for Bob...</p>
					  </div>
					  <div class="flex-item">
					  </div>
				  </div>
					<aside class="notes">
						<p>...and this react app is to show off Bob's company, and how awesome his sales are!</p>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
					  	<p>...and Bob wants James to add<br>a bar chart to show his sales</p><p>...and he wants it NOW!</p>
					  </div>
					  <div class="flex-item">
					  	<img src='images/bob-mad.png'/>
					  </div>
				  </div>
					<aside class="notes">
						<ul>
							<li>To make the site more flashy, Bob wants a bar chart!</li>
							<li>Showing his sales!</li>
							<li>and he wants it NOW!  (as many clients do!)</li>
							<li>I believe many of you are familiar with this scenario...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
					  	<img src='images/james-thumbs-up.png'/>
				  	  </div>
				      <div class="flex-item">
					  	<p>James tells Bob he will get right on it!<br><br>He can use D3.js<br>to add the data visualization!
					  	<br><br>But, where to begin?</p>
					  </div>
				  </div>
					<aside class="notes">
						<ul>
							<li>James, being the good developer he is, tells Bob he will start on it right away</li>
							<li>but this is new territory for James;</li>
							<li>He has not done a data visualization in a react app before</li>
							<li>he is not sure where to start...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
						<img src='images/james-sad.png'/>
					  </div>
					  <div class="flex-item">
					  	<p>James is now a bit stressed...<br><br>How should he go about adding<br>a D3 data visualization<br>to his React app?</p>
					  </div>
				  </div>
					<aside class="notes">
						<ul>
							<li>James is now stressed and frustrated.</li>
							<li>But, again, being the good developer that he is, he:</li>
							<ul>
								<li>analyzes the problem</li>
								<li>and breaks it down into pieces</li>
							</ul>
							<li>First he starts the questions he has...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container key">
						<div class="flex-item">
						<h4>James has these questions:</h4>
							<ol>
								<li>How would you integrate D3 into a React app?</li>
								<li>Don't they both manipulate the DOM?<br>How can I make sure they don't step on each other?</li>
								<li>Where do I draw the line between what React handles<br>and what D3 handles?</li>
								<li>What are the advantages of using these libraries together?</li>
							</ol>
						</div>
					</div>
					<aside class="notes">
						<p>Having asked himself these questions, James decides to start at the beginning, with...</p>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<h4>[STEP 1]: Review your current app</h4>
						</div>
					</div>
					<aside class="notes">
						<p>Always start from where you are!</p>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<img src="images/partial-app.png" class="code-image"/>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>this is what his current app structure looks like</li>
							<li>The app has a starting place, the App component</li>
							<li>and an InputForm, where the user can enter a year for the sales data he wants to see</li>
							<li>That should help him when he starts adding in the data viz code for the bar chart...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container code">
						<div class="flex-item">
							<h4>Let's look at the code!</h4>
							<p>Step 1 code: <a href="http://bit.ly/2m059I3" target="_blank">http://bit.ly/2m059I3</a></p>
						</div>
					</div>
					<aside class="notes">
						<p>Let's look at the code for his base react components and app... (switch to code editor and app)</p>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<h4>[STEP 2]: Get/Find a Standalone D3 Data Visualization</h4>
							<p>Then James looks around online<br>(of course!)<br>to see if he can find a D3 example</p>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>James, like any good developer, hits the interwebs</li>
							<li>looks around to find an example of a D3 bar chart</li>
							<li>to use as a source of the data viz code</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container code">
						<div class="flex-item">
							<h4>Let's look at the code!</h4>
							<p>Step 2 code: <a href="http://bit.ly/2nc1ebw" target="_blank">http://bit.ly/2nc1ebw</a></p>
						</div>
					</div>
					<aside class="notes">
						<p><a href="file:///Users/daniellecloss/projects/react-d3-dom-code/standalone-d3/index.html">file:///Users/daniellecloss/projects/react-d3-dom-code/standalone-d3/index.html</a></p>
						<p>Let's look at the example that James found online (switch to code editor and app)</p>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<h4>[STEP 3]: Divide the D3 code into components</h4>
							<p>James looks at the D3 code,<br>and he sees these components:</p>
							<ul>
								<li>An X axis</li>
								<li>A Y axis</li>
								<li>The bar chart</li>
							</ul>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>James then looks at this D3 code</li>
							<li>mentally separates it into components</li>
							<li>This is a "react-y" way of looking at code</li>
							<li>this will help James to move the D3 code into React components</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<p>While James works to move these D3 components<br>into his React app, he thinks about:</p>
							<ul>
								<li>What should D3 handle, and what should React handle?</li>
								<li>What type of data flow should the I have?</li>
								<li>How should I break up the data visualization into components?</li>
								<li>How should I encapsulate these components?</li>
							</ul>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>These concepts are not specific to react code</li>
							<li>they are all things you would need to think about when building out any kind of coded component system</li>
							<li>this list should already look familiar to you</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<img src="images/full-app.png" class="code-image"/>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>Here is the new app layout, with the additional components for the data visualization</li>
							<li>the dashed line surrounds the original app components</li>
							<li>we now have a BarChart components, made of an 'included' rectangles subcomponent</li>
							<li>and a ChartAxis component</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container code">
						<div class="flex-item">
							<h4>Let's look at the code!</h4>
							<p>Step 3 code: <a href="http://bit.ly/2mz77Cl" target="_blank">http://bit.ly/2mz77Cl</a></p>
						</div>
					</div>
					<aside class="notes">
						<p>Let's take a look at the code that James came up with... (switch to code editor and app)</p>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
						<img src='images/james-happy.png'/>
					  </div>
					  <div class="flex-item">
						<p>At this point, James now has a<br>working bar chart in his React app!<br>But, he's not done yet... </p>
					  </div>
					</div>
					<aside class="notes">
						<ul>
							<li>James is almost done!</li>
							<li>He has a working data visualization</li>
							<li>but he is still missing a key piece...</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<h4>[STEP 4]: Make it interactive!</h4>
							<p>Since James now has the visualization broken up into<br>React components, this part will be easy! Next he needs to:</p>
							<ul>
								<li>Add external sales data</li>
								<li>Use a user selected year for the data</li>
								<li>Send the new data to the BarChart</li>
							</ul>
						</div>
					</div>
					<aside class="notes">
						<p>Because of the work that James already did to put his D3 data visualiztion into react components, adding some interactivity is pretty easy</p>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<p>Let's take a look at what James has come up with:</p>
							<ul>
								<li>New external json file with monthly sales data</li>
								<li>App: add code to get the correct sales data, given the year</li>
								<li>BarChart: add componentWillUpdate, to react to<br>the data prop being updated</li>
								<li>React will update the bars in the BarChart</li>
								<li>D3 can recalculate the scales for the axes</li>
							</ul>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>React can hang onto the data and app state</li>
							<li>When the React BarChart component responds to the new data that is passed in</li>
							<li>React can update the bar chart data and D3 can calculate the correct scale for the axis</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container code">
						<div class="flex-item">
							<h4>Let's look at the code!</h4>
							<p>Step 4 code: <a href="http://bit.ly/2mgU9aq" target="_blank">http://bit.ly/2mgU9aq</a></p>
							<p>app: <a href="http://localhost:8081/" target="_blank">http://localhost:8081/</a></p>
						</div>
					</div>
					<aside class="notes">
						<p>Let's take a look at the code that James has come up with, to finish up the app, making it fully functional (switch to code editor and app)</p>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<h4>And done!</h4>
							<p>James now has an interactive D3 data visualization<br>in his React app, which:</p>
							<ul>
								<li>allows a user to look at sales data for different years...</li>
								<li>...and uses the same data visualization components</li>
							</ul>
						</div>
					</div>
					<aside class="notes">
						<p>James is rather proud of his accomplishment at this point, and feels that this is a good base for his code, so that he can extend his app in the future...</p>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
						<img src='images/james-question.png'/>
					  </div>
					  <div class="flex-item">
						<p>James reflects on all his hard work,<br>thinking about the questions<br>he asked earlier</p>
					  </div>
					</div>
					<aside class="notes">
						<p>Let's take a look at what James has learned from this experience...</p>
					</aside>
				</section>
				<section>
					<div class="flex-container key">
						<div class="flex-item">
							<p><i>1. How would you integrate D3 into a React app?</i></p>
							<ul>
								<li>Start by first reviewing your current React app</li>
								<li>Then find an example standalone D3 data visualization</li>
								<li>Create React components from the D3 code</li>
								<li>Make the data visualization interactive,<br>using the best parts of React and D3 together</li>
							</ul>
						</div>
					</div>
					<aside class="notes">
						<p>It's really as simple as this to get started...</p>
					</aside>
				</section>
				<section>
					<div class="flex-container key">
						<div class="flex-item">
							<p><i>2. Don't they both manipulate the DOM?<br>How can I make sure they don't step on each other?</i></p>
							<p>Yes, they both manipulate the DOM.<br><br>When used together,<br>you should clearly separate who is doing what,<br>according to what each does best.</p>
						</div>
					</div>
					<aside class="notes">
						<p>The idea of 'clear separation' is really a practice synonymous with good software development...</p>
					</aside>
				</section>
				<section>
					<div class="flex-container key">
						<div class="flex-item">
							<p><i>3. Where do I draw the line between what React handles and what D3 handles?</i></p>
							<p>With most DOM manipulations,<br>you can let React handle it,<br>like when storing data and passing it to components.<br><br>But when it comes to<br>highly complex data viz calculations, leave that to D3.</p>
						</div>
					</div>
					<aside class="notes">
						<p>This line may not always be clear, but the important thing to remember is, don't have both D3 and React trying to manipulate the same elements...</p>
					</aside>
				</section>
				<section>
					<div class="flex-container key">
						<div class="flex-item">
							<p><i>4. What are the advantages of using both of these libraries together?</i></p>
							<p>As James is working, he finds out what these are:</p>
							<ul>
								<li>React is faster with DOM manipulation (using it's virtual DOM)</li>
								<li>React is good at handling page/app state</li>
								<li>D3 does a better job at the heavy calculations<br>that are sometimes required for data visualizations,<br>like calculating the scales for a bar chart</li>
							</ul>
						</div>
					</div>
					<aside class="notes">
						<p>Like peanut butter and jelly, they go great together!</p>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
						<svg width="100%" viewBox="0 0 640 225" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><circle fill-opacity=".504" fill="#65D9F9" cx="318" cy="115" r="98" /><circle fill-opacity=".503" fill="#F79E4E" cx="397" cy="115" r="98" /><path d="M357.5 204.428c34.451-15.19 58.5-49.644 58.5-89.714S391.951 40.19 357.5 25C323.049 40.19 299 74.644 299 114.714s24.049 74.523 58.5 89.714z" fill="#FFF" /><circle stroke="#979797" cx="318" cy="115" r="98" /><circle stroke="#979797" cx="397" cy="115" r="98" /><text font-family="Helvetica" font-size="15" letter-spacing=".083" fill="#000"><tspan x="342.877" y="108">DOM</tspan> <tspan x="317.472" y="126">Manipulation</tspan></text><text font-family="Helvetica" font-size="15" letter-spacing=".083" fill="#000"><tspan x="426" y="59">Math</tspan></text><text font-family="Helvetica" font-size="15" letter-spacing=".083" fill="#000"><tspan x="426" y="88">Scales</tspan></text><text font-family="Helvetica" font-size="15" letter-spacing=".083" fill="#000"><tspan x="426" y="117">Layouts</tspan></text><text font-family="Helvetica" font-size="15" letter-spacing=".083" fill="#000"><tspan x="426" y="146">Utilities</tspan></text><text font-family="Helvetica" font-size="15" letter-spacing=".083" fill="#000"><tspan x="426" y="175">Etc.</tspan></text><text font-family="Helvetica" font-size="10" letter-spacing=".056" fill="#000"><tspan x="239.745" y="143">Components</tspan></text><text font-family="Helvetica" font-size="15" letter-spacing=".083" fill="#000"><tspan x="249.32" y="108">Server </tspan> <tspan x="224.036" y="126">Rendering</tspan></text><text font-family="Helvetica" font-size="48" letter-spacing=".267" fill="#000"><tspan x="70.276" y="126">React</tspan></text><text font-family="Helvetica" font-size="48" letter-spacing=".267" fill="#000"><tspan x="517" y="126">d3</tspan></text></g></svg>
						<a href="http://www.macwright.org/2016/10/11/d3-and-react.html" style="font-size:.65em;" target="_blank">http://www.macwright.org/2016/10/11/d3-and-react.html</a>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>I found this graphic while researching this talk, and thought it summed up the overlap in DOM manipulation between React and D3 nicely!</li>
							<li>this graphic also gave a nice list of what React does well</li>
							<li>and what D3 does well</li>
						</ul>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
						<img src='images/james-thumbs-up.png'/>
					  </div>
					  <div class="flex-item">
						<p>James shows Bob his app,<br>with the new <br>sales bar chart, and<br>Bob is excited!</p>
					  </div>
					  <div class="flex-item">
						<img src='images/bob-thumbs-up.png'/>
					  </div>
					</div>
					<aside class="notes">
						<p>Bob likes it!  So much so...</p>
					</aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<p>Bob just has one question,<br><br>"Can we make another page with a pie chart??"</p>
						</div>
					</div>
					<aside class="notes">
						<p>...that he wants another new chart in his site!!!</p>
					</aside>
				</section>
				<section>
					<div class="flex-container">
					  <div class="flex-item">
					  	<img src='images/james-vacation.png'/>
					  </div>
					  <div class="flex-item">
						<p>James politely excuses himself,<br>and decides that a vacation is long overdue!</p>
					  </div>
				  </div>
				  <aside class="notes">
				  	<p>Poor james!  I'm sure you can probably relate to having had a similar experience :)</p>
				  </aside>
				</section>
				<section>
					<div class="flex-container">
						<div class="flex-item">
							<h4>Thanks for listening!</h4>
							<p>code: <a href="http://bit.ly/2mtSyAF" target="_blank">http://bit.ly/2mtSyAF</a></p>
							<p>slides: <a href="http://bit.ly/2mcnNPu" target="_blank">http://bit.ly/2mcnNPu</a></p>
							<br>
							<p><a href="https://twitter.com/daniellecloss" target="_blank">@daniellecloss</a></p>
							<p><a href="mailto:danielle.c.closs@gmail.com">danielle.c.closs@gmail.com</a></p>
						</div>
					</div>
					<aside class="notes">
						<p>Check out the code on github, pull it down, dig through it, compare the standalone D3 code with the React components.  Doing it this way really had an impact on me, even while I use D3 and React daily...</p>

						<p>I hope this has been useful for you, and thanks for listening!</p>

						<p>Questions??</p>
					</aside>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,
				center:false,
				width: "100%",
			    height: "100%",
			    margin: 0,
			    minScale: 1,
			    maxScale: 1,
				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
